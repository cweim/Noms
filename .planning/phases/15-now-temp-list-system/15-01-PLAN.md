---
phase: 15-now-temp-list-system
plan: 01
type: execute
---

<objective>
Add swipe up gesture to bottom card for "Consider now" temp list

Purpose: Enable users to swipe up on a restaurant to add it to a temporary "consider now" list for review, creating a two-action model (swipe up = consider, buttons = skip/save).
Output: SwipeableBottomCard component with vertical gesture detection and "nowList" state management
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-now-page-ux-redesign/14-01-SUMMARY.md

**Key files to modify:**
@mobile/components/BottomRestaurantCard.tsx
@mobile/app/(tabs)/now.tsx

**Existing patterns:**
@mobile/components/SwipeableCard.tsx - PanResponder pattern for swipe detection

**Current state:**
- BottomRestaurantCard: Static card with button actions (skip/save)
- Now screen: skippedIds Set tracks dismissed places
- PanResponder pattern established in SwipeableCard.tsx

**Target state:**
- SwipeableBottomCard: Supports vertical swipe up gesture
- Swipe up threshold: ~50px upward movement
- On swipe up: Add to nowList, animate card up and out, advance to next
- Skip/Save buttons continue to work as before
- nowList state stored in Now screen (session-only, not persisted)

**Design requirements:**
- One-handed usable (swipe up is natural thumb gesture)
- Visual feedback during swipe (card lifts slightly)
- Playful animation (card flies up when threshold met)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SwipeableBottomCard component</name>
  <files>mobile/components/SwipeableBottomCard.tsx</files>
  <action>
  Create new component wrapping BottomRestaurantCard with PanResponder for vertical gesture:

  1. Copy BottomRestaurantCard structure but wrap in Animated.View with PanResponder
  2. Detect vertical swipe up:
     - SWIPE_UP_THRESHOLD = 50 (pixels)
     - Track pan.y movement
     - If gesture.dy < -SWIPE_UP_THRESHOLD, trigger onConsider callback
  3. Horizontal swipes should NOT trigger actions (this card uses buttons for skip/save)
     - Only respond to primarily vertical movements (Math.abs(dy) > Math.abs(dx))
  4. Animation on swipe up:
     - Animate card to y = -500 (off screen top)
     - Duration: 200ms
     - Call onConsider after animation completes
     - Reset pan position
  5. Spring back if swipe not completed:
     - Animated.spring to { x: 0, y: 0 }
  6. Visual feedback during drag:
     - Subtle scale increase as card lifts (interpolate y to scale 1.0 -> 1.02)
     - Add "consider overlay" (orange tint) that fades in as threshold approaches

  Props interface:
  - place: Place
  - photoUrl?: string
  - onSkip: (place: Place) => void
  - onSave: (place: Place) => void
  - onConsider: (place: Place) => void  // NEW

  Keep all existing button functionality from BottomRestaurantCard.
  </action>
  <verify>npx tsc --noEmit passes</verify>
  <done>SwipeableBottomCard component created with swipe up gesture detection</done>
</task>

<task type="auto">
  <name>Task 2: Integrate swipe gesture and nowList state</name>
  <files>mobile/app/(tabs)/now.tsx</files>
  <action>
  Update Now screen to use SwipeableBottomCard and manage nowList state:

  1. Replace BottomRestaurantCard import with SwipeableBottomCard
  2. Add nowList state:
     ```typescript
     const [nowList, setNowList] = useState<Place[]>([]);
     ```
  3. Add handleConsider callback:
     ```typescript
     const handleConsider = (place: Place) => {
       setNowList(prev => [...prev, place]);
       // Also add to skippedIds so we advance to next card
       setSkippedIds(prev => new Set([...prev, place.google_place_id]));
     };
     ```
  4. Pass onConsider prop to SwipeableBottomCard
  5. Show nowList count indicator at top of screen:
     - Small pill/badge showing "{count} considering" if count > 0
     - Position: absolute top-right, below safe area
     - Style: orange background (#F97316), white text, rounded pill
     - Example: "3 considering"

  The nowList state is session-only - it will clear on app restart.
  Plan 15-02 will add the overlay UI to review and select from nowList.
  </action>
  <verify>App compiles, swipe up adds to nowList and advances card, count badge shows</verify>
  <done>Now screen integrates swipe gesture with nowList state tracking and count indicator</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] TypeScript check passes: `cd mobile && npx tsc --noEmit`
- [ ] SwipeableBottomCard component exists
- [ ] Swipe up on card triggers onConsider
- [ ] Card animates up and off screen on successful swipe
- [ ] Skip/Save buttons still work correctly
- [ ] nowList count badge appears when list has items
- [ ] Card advances to next restaurant after swipe up
</verification>

<success_criteria>
- Swipe up gesture detected and handled
- nowList state tracks considered places
- Count indicator visible
- Existing button functionality preserved
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-now-temp-list-system/15-01-SUMMARY.md`
</output>
