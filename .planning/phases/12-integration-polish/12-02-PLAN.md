# Phase 12: Integration & Polish (Plan 02) - End-to-End Flow Verification

**Goal**: Verify all three core user flows work end-to-end with real backend

**Depends on**: Plan 12-01 (Auth UI), All prior phases

## Context

The app has three core flows that need verification:
1. **Now (Picker)**: Browse restaurants, swipe to skip/like, save liked places
2. **Saved**: View saved places, remove places
3. **Journal**: Add photo entries, view entries, delete entries

This plan has human-verify checkpoints to ensure each flow works correctly.

## Tasks

### Task 1: Verify Backend is Running

**File**: N/A (verification only)

Ensure backend server is running and healthy:

```bash
cd /Users/chinweiming/Desktop/Noms-app/backend
# Check if server is running
curl http://localhost:8000/health || echo "Start server: uvicorn app.main:app --reload"
```

Verify health endpoint returns `{"status": "healthy"}`.

### Task 2: Verify Mobile App Connects to Backend

**File**: N/A (verification only)

Check that API_BASE_URL in mobile/lib/api.ts points to running backend:

```typescript
// Should be something like:
export const API_BASE_URL = 'http://localhost:8000';
// Or for device testing:
export const API_BASE_URL = 'http://192.168.x.x:8000';
```

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Backend and mobile connectivity check</what-built>
  <how-to-verify>
    1. Start backend: `cd backend && uvicorn app.main:app --reload`
    2. Verify: `curl http://localhost:8000/health` returns healthy
    3. Start mobile: `cd mobile && npx expo start`
    4. Open app in simulator/device
    5. Auth screen should appear (from 12-01)
    6. Create account or sign in
    7. App should load Now tab without errors
  </how-to-verify>
  <resume-signal>Type "connected" when backend and mobile are communicating, or describe issues</resume-signal>
</task>

### Task 3: Test Now Tab (Restaurant Picker Flow)

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Restaurant picker with map and swipeable cards</what-built>
  <how-to-verify>
    1. On Now tab, allow location permission if prompted
    2. Map should show your current location
    3. Restaurant cards should appear (fetched from Google Places via backend)
    4. Swipe left to skip a restaurant - card should dismiss
    5. Swipe right to like a restaurant - card should dismiss AND save to Saved list
    6. Cards should continue appearing until exhausted
    7. Check console for any errors
  </how-to-verify>
  <resume-signal>Type "picker-ok" if flow works, or describe issues</resume-signal>
</task>

### Task 4: Test Saved Tab Flow

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Saved places list with remove functionality</what-built>
  <how-to-verify>
    1. Navigate to Saved tab
    2. Should see places you liked in step 3
    3. Each card shows photo, name, address
    4. Tap "Remove" on a place - should disappear from list
    5. Empty state should show if all removed
    6. Go back to Now, like another place, return to Saved - should appear
  </how-to-verify>
  <resume-signal>Type "saved-ok" if flow works, or describe issues</resume-signal>
</task>

### Task 5: Test Journal Tab Flow

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Photo journal with add entry modal and list display</what-built>
  <how-to-verify>
    1. Navigate to Journal tab
    2. Should show empty state ("No entries yet")
    3. Tap the + FAB button
    4. Modal should appear with photo options
    5. Take photo or select from library
    6. Optionally add rating (tap 1-5)
    7. Optionally add note
    8. Tap Save
    9. Entry should appear in journal list with photo
    10. Entry shows date, rating (if added), note (if added)
    11. Tap Delete on entry - should remove
  </how-to-verify>
  <resume-signal>Type "journal-ok" if flow works, or describe issues</resume-signal>
</task>

## Verification

All checkpoints passed:
- [ ] Backend healthy and connected
- [ ] Picker flow works (swipe, like saves)
- [ ] Saved flow works (view, remove)
- [ ] Journal flow works (add with photo, view, delete)

## Notes

- If any checkpoint fails, fix the issue before proceeding
- Note any UI issues for polish in 12-03
- Test on iOS simulator primarily, Android if available
