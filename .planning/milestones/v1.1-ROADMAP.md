# Milestone v1.1: Now Flow Redesign

**Status:** ✅ SHIPPED 2026-01-19
**Phases:** 13-17
**Total Plans:** 8

## Overview

Redesigned the core picker UX with bottom cards, map integration, two-list system (Save for later vs Consider now), and place details screen. This milestone transforms the Now flow from a simple card picker to a spatial, map-first experience with better decision-making support.

## Phases

### Phase 13: Bug Fix & Backend Prep

**Goal**: Fix saved places images bug and prepare backend for details endpoint
**Depends on**: Phase 12 (previous milestone complete)
**Plans**: 2 plans

Plans:
- [x] 13-01: Fix Saved Places Images Bug - Debug and fix photo_reference caching
- [x] 13-02: Backend Details Endpoint Prep - PlaceDetails schema and endpoint

**Details:**
- Root cause: Photo endpoint required header auth, but Image components can't send headers
- Solution: Query parameter authentication (`?token=<jwt>`)
- Added comprehensive PlaceDetails endpoint for Phase 16

### Phase 14: Now Page UX Redesign

**Goal**: Transform picker to bottom card layout with map highlighting current restaurant
**Depends on**: Phase 13
**Plans**: 1 plan

Plans:
- [x] 14-01: Bottom Card Layout - Create compact bottom card, map centering, selected marker

**Details:**
- Created BottomRestaurantCard component (120px height, horizontal layout)
- Map animates to center on current restaurant
- Selected marker has distinct styling (larger, darker, white border)

### Phase 15: Now Temp List System

**Goal**: Implement swipe up gesture for "Now" list, temp list storage, and review phase
**Depends on**: Phase 14
**Plans**: 2 plans

Plans:
- [x] 15-01: Swipeable Card with Gestures - SwipeableBottomCard, swipe up detection, nowList state
- [x] 15-02: Temp List UI and Review - TempListOverlay, selection flow, list management

**Details:**
- PanResponder for vertical gesture detection (50px threshold)
- Orange "consider" overlay fades in as card lifts
- TempListOverlay slides up from bottom with spring animation
- Session-only state (clears on app restart)

### Phase 16: Place Details Screen

**Goal**: Full restaurant details with name, address, phone, hours, photo gallery, and Google reviews
**Depends on**: Phase 13
**Plans**: 2 plans

Plans:
- [x] 16-01: Place Details Screen Core - API client, PlaceDetailsScreen component, photo endpoint
- [x] 16-02: Navigation Integration - Connect Now and Saved screens to details

**Details:**
- Dynamic route at `/place/[id]`
- Horizontal photo gallery with pagination
- Contact actions: address → maps, phone → call, website → browser
- Collapsible hours section
- Navigation from Now card, TempList, and Saved screen

### Phase 17: Integration & Polish

**Goal**: Connect all flows, cross-platform testing, final polish
**Depends on**: Phase 14, Phase 15, Phase 16
**Plans**: 1 plan

Plans:
- [x] 17-01: E2E Verification & Cleanup - Remove deprecated components, verify v1.1 flows

**Details:**
- Removed 4 deprecated components (RestaurantCard, RestaurantPicker, SwipeableCard, BottomRestaurantCard)
- Verified all v1.1 features work together
- TypeScript check passes

---

## Milestone Summary

**Key Decisions:**
- Query param auth for photos (Image components can't send headers)
- Session-only temp list (no persistence needed for "deciding now" use case)
- Swipe up gesture for "consider" action (distinct from skip/save)
- Info button in TempList for details (preserves tap-to-select behavior)

**Issues Resolved:**
- Saved places images not displaying (fixed with token auth)
- Double header spacing on screens (removed custom headers)
- Swipe up not advancing to next card (stale closure fix)

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
